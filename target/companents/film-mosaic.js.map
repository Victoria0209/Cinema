{"version":3,"sources":["../../js/companents/film-mosaic.js"],"names":["blockFilmsWrapper","document","getElementById","renderFilmBlock","posterUrl","filmName","id","wrapper","createElement","classList","add","link","href","wrapperImg","imgTag","src","divShadow","divFilmBlock","header2","textContent","divDesc","append","fetchBlockFilms","result","json","data","requests","filmBlocksMap","Map","films","forEach","film","posterUrlPreview","nameRu","filmId","filmLayout","push","Promise","resolve","reject","detailResult","detailData","description","set","all","innerHTML","elements","values","slice"],"mappings":"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","sourcesContent":["import { topFilmsRequest, filmDetailsRequest } from '../__data__/api/kinopoiskapiunofficialRequest.js';\r\n\r\nconst blockFilmsWrapper = document.getElementById('block-mosaic_wrapper__id');\r\n\r\nfunction renderFilmBlock(posterUrl, filmName, id) {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.classList.add('film_pic', 'film_item1');\r\n    const link = document.createElement('a');\r\n    link.href = `/single/?id=${id}`;\r\n    const wrapperImg = document.createElement('div');\r\n    wrapperImg.classList.add('wrapper_block__img');\r\n    const imgTag = document.createElement('img');\r\n    imgTag.src = posterUrl;\r\n    const divShadow = document.createElement('div');\r\n    divShadow.classList.add('film_shadow');\r\n    const divFilmBlock = document.createElement('div');\r\n    divFilmBlock.classList.add('films_block');\r\n    const header2 = document.createElement('h2');\r\n    header2.classList.add('film_name');\r\n    header2.textContent = filmName;\r\n    const divDesc = document.createElement('div');\r\n    divDesc.classList.add('film_desc');\r\n\r\n    wrapper.append(link);\r\n    link.append(wrapperImg, divShadow);\r\n    wrapperImg.append(imgTag);\r\n    divShadow.append(divFilmBlock);\r\n    divFilmBlock.append(header2, divDesc);\r\n\r\n    return [wrapper, divDesc];\r\n};\r\n\r\nconst fetchBlockFilms = async () => {\r\n    const result = await topFilmsRequest();\r\n    const data = await result.json();\r\n\r\n    const requests = [];\r\n    const filmBlocksMap = new Map();\r\n\r\n    data.films.forEach((film) => {\r\n        const [filmLayout, divDesc] = renderFilmBlock(film.posterUrlPreview, film.nameRu, film.filmId)\r\n        requests.push(new Promise(async (resolve, reject) => {\r\n            const detailResult = await filmDetailsRequest(film.filmId);\r\n            const detailData = await detailResult.json();\r\n            const description = detailData.data.description;\r\n            if (description) {\r\n                filmBlocksMap.set(film.filmId, filmLayout)\r\n                divDesc.textContent = description;\r\n            }\r\n            resolve();\r\n        }));\r\n    })\r\n    await Promise.all(requests);\r\n    blockFilmsWrapper.innerHTML = \"\";\r\n    const elements = [...filmBlocksMap.values()].slice(0, 9)\r\n    blockFilmsWrapper.append(...elements)\r\n}\r\nfetchBlockFilms();"],"file":"film-mosaic.js"}